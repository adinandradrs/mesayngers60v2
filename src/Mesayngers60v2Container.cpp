/*
* ============================================================================
*  Name     : CMesayngers60v2Container from Mesayngers60v2Container.h
*  Part of  : mesayngers60v2
*  Created  : 4/9/2024 by adinandradrs
*  Implementation notes:
*     Initial content was generated by Series 60 AppWizard.
*  Version  :
*  Copyright: 
* ============================================================================
*/

#include <eiklabel.h>
#include <barsread.h>
#include <eikedwin.h>

#include "mesayngers60v2.rsg"
#include "mesayngers60v2.hrh"
#include "Mesayngers60v2Container.h"

const TInt KNumberOfControls = 2;
const TInt KBufLength = 64;

enum TControls {
    ELblChatFld,
    EChatFld
};

CMesayngers60v2Container::CMesayngers60v2Container()
    :iLblChatFld(NULL), iChatFld(NULL) {
}

void CMesayngers60v2Container::ConstructL(const TRect& aRect) {
    CreateWindowL();
    
    iLblChatFld = new (ELeave) CEikLabel;
    iLblChatFld->SetContainerWindowL( *this );
    iLblChatFld->SetTextL( _L("Message") );
    iLblChatFld->SetExtent( TPoint(10, 40), iLblChatFld->MinimumSize() );

    TResourceReader reader;
    TBuf<KBufLength> text;
    
    iCoeEnv->CreateResourceReaderLC(reader, R_MESAYNGERS60V2_CHAT_FLD);
    iChatFld = new (ELeave) CEikEdwin;
    iChatFld->SetContainerWindowL(*this);
    iChatFld->ConstructFromResourceL(reader);
    CleanupStack::PopAndDestroy(); 
    iChatFld->SetExtent(TPoint(10, 60), iChatFld->MinimumSize());
    iChatFld->SetFocus(ETrue);

    SetRect(aRect);
    ActivateL();
}

CMesayngers60v2Container::~CMesayngers60v2Container() {
    delete iLblChatFld;
    delete iChatFld;
}

void CMesayngers60v2Container::SizeChanged() {
}

TInt CMesayngers60v2Container::CountComponentControls() const {
    return KNumberOfControls;
}

CCoeControl* CMesayngers60v2Container::ComponentControl(TInt aIndex) const {
    switch ( aIndex ) {
        case ELblChatFld:
            return iLblChatFld;
        case EChatFld:
            return iChatFld;
        default:
            return NULL;
    }
}

void CMesayngers60v2Container::FocusTo(TInt aCommand) {
    switch(aCommand) {
        default:
            break;
    }
}

TKeyResponse CMesayngers60v2Container::OfferKeyEventL(const TKeyEvent& aKeyEvent, TEventCode aType) {
    return EKeyWasNotConsumed;
}

void CMesayngers60v2Container::Draw(const TRect& aRect) const {
    CWindowGc& gc = SystemGc();
    gc.SetPenStyle( CGraphicsContext::ENullPen );
    gc.SetBrushColor( KRgbGray );
    gc.SetBrushStyle( CGraphicsContext::ESolidBrush );
    gc.DrawRect( aRect );
}

void CMesayngers60v2Container::HandleControlEventL(CCoeControl*, TCoeEvent) {
}